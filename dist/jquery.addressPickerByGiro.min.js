function selectResult(e,t){if(1==e.length)return e[0].querySelectorAll(t);for(var n=[],i=0;i<e.length;i++){var s=e[i],a=angular.element(s.querySelectorAll(t));n.push.apply(n,a.slice())}return n}function size(e,t){if("undefined"==typeof e)return null;var n,i,s="paddingTop",a="paddingBottom",r="offsetHeight";return"width"==t&&(s="paddingLeft",a="paddingRight",r="offsetWidth"),n=getComputedStyle(e),i=e[r],n&&(i-=parseFloat(n[s])+parseFloat(n[a])),i}var bg=bg||!1;bg||("undefined"!=typeof jQuery?bg=jQuery:"undefined"!=typeof angular&&(bg=angular.element,bg.extend=angular.extend,bg.prototype.is=function(e){for(var t=0;t<this.length;t++){var n=this[t];if((n.matches||n.matchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector).call(n,e))return!0}return!1},bg.prototype.find=function(e){var t=this[0];if(!t||1!==t.nodeType&&9!==t.nodeType||!angular.isString(e))return[];var n=[];if(">"===e.charAt(0)&&(e=":scope "+e),e.indexOf(":visible")>-1){var i=angular.element(selectResult(this,e.split(":visible")[0]));forEach(i,function(e){angular.element(e).is(":visible")&&n.push(e)})}else n=selectResult(this,e);return n.length?angular.element(1==n.length?n[0]:n):angular.element()},bg.prototype.width=function(){return size(this[0],"width")},bg.prototype.height=function(){size(this[0])})),function(e){"use strict";function t(e,t,n){clearTimeout(r[n]),r[n]=setTimeout(e,t)}function n(t){var n,i=this,t=t||this.addressMapping[this.$element.val()],s=!1;t||(s=!0);for(var a in this.settings.boundElements){var r=this.settings.boundElements[a],o="";if("function"!=typeof r){if(n=e(r),s||!(n.length<0)&&t.cleanData){s||(o="address_components"==a?JSON.stringify(t.cleanData):t.cleanData[a]);for(var l=n.length,d=0;l>d;d++){var g="val",c=n.eq(d);c.is("input, select, textarea")||(g="text"),c[g](o||"")}}}else o=r.call(i,t)}i.$element.parent().find(".suggestions-container").remove(),s||i.$element.triggerHandler("selected.addressPickerByGiro",t)}function i(){var t=this,n=e.extend({},t.settings.mapOptions);n.center=new google.maps.LatLng(n.center[0],n.center[1]);var i={position:n.center,draggable:!0,raiseOnDrag:!0,map:t.gmap,labelContent:t.settings.text.you_are_here,labelAnchor:new google.maps.Point(0,0),labelClass:t.settings.markerLabelClass,labelStyle:{opacity:1}};if("styled"==t.settings.markerType&&"function"==typeof StyledMarker){var s=new StyledIcon(StyledIconTypes.BUBBLE,{color:"#51A351",fore:"#ffffff",text:t.settings.text.you_are_here});i.styleIcon=s,t.gmarker=new StyledMarker(i)}else t.gmarker="labeled"==t.settings.markerType&&"function"==typeof MarkerWithLabel?new MarkerWithLabel(i):new google.maps.Marker(i);google.maps.event.addListener(t.gmarker,"dragend",function(){t.geocodeLookup(t.gmarker.getPosition(),!1,"latLng",!0)}),google.maps.event.addListener(t.gmap,"click",function(e){t.gmarker.setPosition(e.latLng),t.geocodeLookup(e.latLng,!1,"latLng",!0),t.resizeMap()}),this.gmarker.setVisible(!1)}function s(){var t,n=this,i=e.extend({},n.settings.mapOptions);i.center=new google.maps.LatLng(i.center[0],i.center[1]),t&&(t=1e3*t),t=t||n.settings.distanceWidgetRadius;var s=new google.maps.Circle({center:i.center,radius:t,strokeColor:"#005DE0",strokeOpacity:.8,strokeWeight:2,fillColor:"#005DE0",fillOpacity:.25,map:n.gmap}),a=function(){s.setEditable(!0)},r=function(){s.setEditable(!1)};n.gcircle=s,n.gcircle.setVisible(!1),google.maps.event.addListener(n.gcircle,"radius_changed",function(){n.updater()}),google.maps.event.addListener(n.gcircle,"mouseover",a),google.maps.event.addListener(n.gcircle,"mouseout",r),n.gcircle.bindTo("center",n.gmarker,"position")}var a,r={};a={init:function(t,n){function i(t){console.log(t.type),"mouseover"==t.type&&e(this).addClass("mouseishover"),a.$element.is(":focus")&&("hidden"==a.settings.style&&a.$mapContainer.css("display","block"),a.resizeMap())}function s(t){console.log(t.type),"mouseout"==t.type&&e(this).removeClass("mouseishover"),e(this).hasClass("mouseishover")||a.$element.is(":focus")||"hidden"==a.settings.style&&(a.geocodeLookup(a.$element.val(),!1,"",!0),a.$mapContainer.css("display","none"))}var a=this;a.$element=t,a.settings=e.extend({},{style:"hidden",map:!1,mapId:!1,mapWidth:"100%",mapHeight:"300px",mapOptions:{zoom:3,center:[51.751724,-1.255284],scrollwheel:!1,mapTypeId:"roadmap"},makerType:!1,distanceWidget:!1,distanceWidgetRadius:3e4,appendToAddressString:"",geocoderOptions:{language:"en"},boundElements:{},text:{you_are_here:"You are here!"},map_rendered:!1},n),a.addressMapping={},a.currentItem="",a.geocoder=new google.maps.Geocoder,a.$element.wrap('<div style="position: relative;" class="addresspicker-container"></div>'),a.initMap.call(a);var r=a.$element.parent()[0];r.addEventListener("focus",i,!0),r.addEventListener("blur",s,!0),r.addEventListener("mouseover",i,!0),r.addEventListener("mouseout",s,!0),a.$element.parent().on("keyup",function(){a.showSuggestions()}).on("click",function(t){var n=e(t.target);n.is(".suggestions-container li")&&(a.geocodeLookup(n.text(),!1,"",!0),e(this).find(".suggestions-container").remove())}),""!=a.$element.val()&&a.geocodeLookup(a.$element.val(),!1,"",!0)},initMap:function(){var t=this;if(t.settings.mapId||t.settings.map instanceof google.maps.Map?t.$mapContainer=e(t.settings.mapId):(t.settings.mapId=(new Date).getTime()+Math.floor(9999999*Math.random()+1),t.$mapContainer=e('<div style="margin: 5px 0; width: '+t.settings.mapWidth+"; height: "+t.settings.mapHeight+';" id="'+t.settings.mapId+'"></div>'),t.$element.after(t.$mapContainer)),"hidden"==t.settings.style&&t.$mapContainer.css("display","none"),1==t.map_rendered)return void t.resizeMap.call(t);var n=e.extend({},t.settings.mapOptions);this.settings.map instanceof google.maps.Map?this.gmap=this.settings.map:(n.center=new google.maps.LatLng(n.center[0],n.center[1]),this.gmap=new google.maps.Map(t.$mapContainer[0],n)),i.call(this),this.settings.distanceWidget&&s.call(this),t.map_rendered=!0},showSuggestions:function(){var e=this;t(function(){e.geocodeLookup(e.$element.val(),function(){var t='<div style="position: absolute;z-index: 2000;background:#fff;" class="suggestions-container"><ul>';for(var n in this.addressMapping)t+="<li>"+n+"</li>";t+="</ul></div>",e.$element.next().hasClass("suggestions-container")&&e.$element.next().remove(),e.$element.after(t)},!1,!1,!0)},250,"source")},updater:function(e){var t,i,s=this,e=e||s.$element.val(),a=this.addressMapping[e]||!1,r={};if(a){if(i=a.geometry.location,t={country:{long_name:"country",short_name:"country_code"},administrative_area_level_1:{long_name:"region",short_name:"region_code"},administrative_area_level_2:{long_name:"county",short_name:"county_code"},locality:{long_name:"city"},sublocality:{long_name:"city_district"},postal_code:{long_name:"zip"},route:{long_name:"street"},street_number:{long_name:"street_number"}},a.address_components)for(var o=0;o<a.address_components.length;o++){var l=a.address_components[o];for(var d in t)if(l.types.indexOf(d)>=0)for(var g in t[d])"undefined"!=typeof l[g]&&(r[t[d][g]]=l[g])}return r.latitude=Number(i.lat().toFixed(8)),r.longitude=Number(i.lng().toFixed(8)),r.formatted_address=a.formatted_address,s.gmarker&&(s.gmarker.setPosition(a.geometry.location),s.gmarker.setVisible(!0)),s.gcircle&&(s.gcircle.setCenter(a.geometry.location),s.gcircle.setVisible(!0),r.radius=Math.round(s.gcircle.getRadius())/1e3),s.gmap.fitBounds(s.gcircle?s.gcircle.getBounds():a.geometry.viewport),a.cleanData=r,n.call(s,a),e}},currentAddress:function(){return this.addressMapping[this.$element.val()]||{}},geocodeLookup:function(t,i,s,a,r){a=a||!1,s=s||"";var o=this,l=e.extend({},o.settings.geocoderOptions);if(a&&n.call(o),"latLng"==s)"string"==typeof t&&(t=t.split(","),t=new google.maps.LatLng(t[0],t[1])),l.latLng=t;else if(l.address=t+o.settings.appendToAddressString,!r&&"function"==typeof i&&"undefined"!=typeof o.addressMapping[t])return void(a&&o.updater(t));this.geocoder.geocode(l,function(e,t){if(t===google.maps.GeocoderStatus.OK){o.addressMapping={};for(var n=0;n<e.length&&9>n;n++){var s=e[n];o.addressMapping[s.formatted_address]=s}if("function"==typeof i&&i.call(o,e),a){var r=e[0].formatted_address;o.$element.val(r),o.addressMapping[r]=e[0],o.updater(r)}}})},resizeMap:function(n,i){var s=this;t(function(){var t,a=s.$mapContainer?s.$mapContainer.parent():e("#"+s.settings.mapId).parent();if(a.length){{var r=a.parent();r.height(),r.width()}t="undefined"!=typeof n&&"undefined"!=typeof i?new google.maps.LatLng(n,i):s.gmap.getCenter(),google.maps.event.trigger(s.gmap,"resize"),s.gmap.setCenter(t)}},300,"resize")},setRadius:function(e){var t=this;t.gcircle&&(t.gcircle.setRadius(1e3*e),t.gmap.fitBounds(t.gcircle.getBounds()))}};var o=function(t){var n=this.data("addressPickerByGiro");if(n)return"string"==typeof t&&n[t]?n[t].apply(n,Array.prototype.slice.call(arguments,1)):console.log("Method "+t+" does not exist on jQuery.addressPickerByGiro");if(!t||"object"==typeof t){for(var i=this.length,s=0;i>s;s++){var n,r=e(this[s]);n=e.extend({},a),n.init(r,t),r.data("addressPickerByGiro",n)}return this}return console.log('jQuery.addressPickerByGiro is not instantiated. Please call $("selector").addressPickerByGiro({options})')};e.fn?e.fn.addressPickerByGiro=o:e.prototype.addressPickerByGiro=o}(bg);