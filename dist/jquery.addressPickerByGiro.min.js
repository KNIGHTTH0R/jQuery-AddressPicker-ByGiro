function selectResult(e,t){if(1==e.length)return e[0].querySelectorAll(t);for(var a=[],n=0;n<e.length;n++){var s=e[n],i=angular.element(s.querySelectorAll(t));a.push.apply(a,i.slice())}return a}function size(e,t){if("undefined"==typeof e)return null;var a,n,s="paddingTop",i="paddingBottom",r="offsetHeight";return"width"==t&&(s="paddingLeft",i="paddingRight",r="offsetWidth"),a=getComputedStyle(e),n=e[r],a&&(n-=parseFloat(a[s])+parseFloat(a[i])),n}var bg=bg||!1;bg||("undefined"!=typeof jQuery?bg=jQuery:"undefined"!=typeof angular&&(bg=angular.element,bg.extend=angular.extend,bg.prototype.closest=function(e){for(var t=this,a=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector;t;){if(a.call(t,e))return t;t=t.parentNode}return!1},bg.prototype.is=function(e){for(var t=0;t<this.length;t++){var a=this[t];if((a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector).call(a,e))return!0}return!1},bg.prototype.find=function(e){var t=this[0];if(!t||1!==t.nodeType&&9!==t.nodeType||!angular.isString(e))return[];var a=[];if(">"===e.charAt(0)&&(e=":scope "+e),e.indexOf(":visible")>-1){var n=angular.element(selectResult(this,e.split(":visible")[0]));forEach(n,function(e){angular.element(e).is(":visible")&&a.push(e)})}else a=selectResult(this,e);return a.length?angular.element(1==a.length?a[0]:a):angular.element()},bg.prototype.width=function(){return size(this[0],"width")},bg.prototype.height=function(){size(this[0])})),function(e){"use strict";function t(e,t,a){clearTimeout(r[a]),r[a]=setTimeout(e,t)}function a(t){var a,n=this,t=t||this.addressMapping[this.$element.val()],s=!1;t||(s=!0);for(var i in this.settings.boundElements){var r=this.settings.boundElements[i],o="";if("function"!=typeof r){if(a=e(r),s||!(a.length<0)&&t.cleanData){s||(o="address_components"==i?JSON.stringify(t.cleanData):t.cleanData[i]);for(var d=a.length,l=0;d>l;l++){var g="val",c=a.eq(l);c.is("input, select, textarea")||(g="text"),c[g](o||"")}}}else o=r.call(n,t)}n.removeSuggestions(),s||n.$element.triggerHandler("selected.addressPickerByGiro",t)}function n(){var t=this,a=t.settings,n=e.extend({},a.mapOptions);n.center=new google.maps.LatLng(n.center[0],n.center[1]);var s={position:n.center,draggable:!0,raiseOnDrag:!0,map:t.gmap,labelContent:a.text.you_are_here,labelAnchor:new google.maps.Point(0,0),labelClass:a.markerLabelClass,labelStyle:{opacity:1}};if("styled"==a.markerType&&"function"==typeof StyledMarker){var i=new StyledIcon(StyledIconTypes.BUBBLE,{color:"#51A351",fore:"#ffffff",text:a.text.you_are_here});s.styleIcon=i,t.gmarker=new StyledMarker(s)}else t.gmarker="labeled"==a.markerType&&"function"==typeof MarkerWithLabel?new MarkerWithLabel(s):new google.maps.Marker(s);google.maps.event.addListener(t.gmarker,"dragend",function(){t.geocodeLookup(t.gmarker.getPosition(),!1,"latLng",!0)}),google.maps.event.addListener(t.gmap,"click",function(e){t.gmarker.setPosition(e.latLng),t.geocodeLookup(e.latLng,!1,"latLng",!0),t.resizeMap()}),this.gmarker.setVisible(!1)}function s(){var t,a=this,n=a.settings,s=e.extend({},n.mapOptions);s.center=new google.maps.LatLng(s.center[0],s.center[1]),t&&(t=1e3*t),t=t||n.distanceWidgetRadius;var i=new google.maps.Circle({center:s.center,radius:t,strokeColor:"#005DE0",strokeOpacity:.8,strokeWeight:2,fillColor:"#005DE0",fillOpacity:.25,map:a.gmap}),r=function(){i.setEditable(!0)},o=function(){i.setEditable(!1)};a.gcircle=i,a.gcircle.setVisible(!1),google.maps.event.addListener(a.gcircle,"radius_changed",function(){a.updater()}),google.maps.event.addListener(a.gcircle,"mouseover",r),google.maps.event.addListener(a.gcircle,"mouseout",o),a.gcircle.bindTo("center",a.gmarker,"position")}var i,r={};i={init:function(a,n){function s(e){r(!0,e)}function i(e){r(!1,e)}function r(e,a){"undefined"!=typeof e&&t(function(){if(e){if(g.addClass("mouseishover"),!o.$element.is(":focus"))return;o.$mapBox.addClass("map-active"),o.resizeMap(),""!=o.$element.val()&&g.hasClass("invalid-address")&&o.showSuggestions()}else{if("mouseout"==a.type&&g.removeClass("mouseishover"),g.hasClass("mouseishover")||o.$element.is(":focus"))return;o.removeSuggestions(),o.$mapBox.removeClass("map-active")}},50,"showHide")}var o=this;o.$element=a,o.settings=e.extend({},{showMap:!1,map:!1,mapId:!1,mapWidth:"100%",mapHeight:"300px",mapOptions:{zoom:3,center:[51.751724,-1.255284],scrollwheel:!1,mapTypeId:"roadmap"},zoom:!1,makerType:!1,distanceWidget:!1,distanceWidgetRadius:3e4,appendToAddressString:"",geocoderOptions:{language:"en"},searchInitialValue:!0,boundElements:{},text:{you_are_here:"You are here!",valid:"Valid Gmaps address",invalid:"Invalid Gmaps address"},map_rendered:!1},n);var d=o.settings;o.addressMapping={},o.currentItem="",o.geocoder=new google.maps.Geocoder,o.$element.wrap('<div class="ap-container '+(d.showMap?"":"ap-type-hidden")+'"></div>'),o.$element.wrap('<div class="ap-input-cont"></div>'),o.$element.after('<span class="ap-status-address"><span class="icon-ap"></span><span class="text-ap"></span></span>'),o.$mainCont=o.$element.parent().parent(),o.initMap.call(o);var l=o.$mainCont[0],g=o.$mainCont;l.addEventListener("focus",s,!0),l.addEventListener("blur",i,!0),l.addEventListener("mouseover",s,!0),l.addEventListener("mouseout",i,!0),g.on("keyup",function(){var e="addClass",t=d.text.invalid,a=o.$element.val(),n=!1;o.address&&a.trim()==o.address.formatted_address||(g.removeClass("valid-address"),""==a&&(e="removeClass",t="",n=void 0),g[e]("invalid-address"),g.find(".ap-status-address .text-ap").text(t),o.valid=n,delete o.address,o.showSuggestions())}).on("click",function(t){var a=e(t.target);return a.is(".suggestions-container li")?(o.geocodeLookup(a.text(),!1,"",!0),t.stopPropagation(),void o.removeSuggestions()):void s(t)}),e(document).on("click",function(t){var a=e(t.target);if(!a.is(".suggestions-container li")){var n=a.closest(g[0]);n.length&&n.is(g[0])||o.removeSuggestions()}}),d.searchInitialValue&&""!=o.$element.val()&&o.geocodeLookup(o.$element.val(),!1,"",!0)},initMap:function(){var t,a=this,i=a.settings;if(i.mapId||i.map instanceof google.maps.Map?a.$mapBox=e(i.mapId):(i.mapId=(new Date).getTime()+Math.floor(9999999*Math.random()+1),a.$mapBox=e('<div class="map-box" style="width: '+i.mapWidth+"; height: "+i.mapHeight+';" id="'+i.mapId+'"></div>'),a.$mainCont.append(a.$mapBox)),t=a.$mapBox.removeClass("map-active"),1==a.map_rendered)return void a.resizeMap.call(a);var r=e.extend({},i.mapOptions);this.settings.map instanceof google.maps.Map?this.gmap=this.settings.map:(r.center=new google.maps.LatLng(r.center[0],r.center[1]),this.gmap=new google.maps.Map(t[0],r)),n.call(this),this.settings.distanceWidget&&s.call(this),a.map_rendered=!0},removeSuggestions:function(){this.$mainCont.find(".suggestions-container").remove()},showSuggestions:function(){var e=this;t(function(){e.geocodeLookup(e.$element.val(),function(){var t='<div class="suggestions-container"><ul>',a=e.$mainCont.find(".suggestions-container");for(var n in this.addressMapping)t+="<li>"+n+"</li>";t+="</ul></div>",a.length&&a.remove(),e.$element.parent().after(t)},!1,!1,!0)},250,"source")},updater:function(e){var t,n,s=this,i=s.settings,e=e||s.$element.val(),r=this.addressMapping[e]||!1,o={};if(r){if(n=r.geometry.location,t={country:{long_name:"country",short_name:"country_code"},administrative_area_level_1:{long_name:"region",short_name:"region_code"},administrative_area_level_2:{long_name:"county",short_name:"county_code"},locality:{long_name:"city"},sublocality:{long_name:"city_district"},postal_code:{long_name:"zip"},route:{long_name:"street"},street_number:{long_name:"street_number"}},r.address_components)for(var d=0;d<r.address_components.length;d++){var l=r.address_components[d];for(var g in t)if(l.types.indexOf(g)>=0)for(var c in t[g])"undefined"!=typeof l[c]&&(o[t[g][c]]=l[c])}return o.latitude=Number(n.lat().toFixed(8)),o.longitude=Number(n.lng().toFixed(8)),o.formatted_address=r.formatted_address,s.gmarker&&(s.gmarker.setPosition(r.geometry.location),s.gmarker.setVisible(!0)),s.gcircle&&(s.gcircle.setCenter(r.geometry.location),s.gcircle.setVisible(!0),o.radius=Math.round(s.gcircle.getRadius())/1e3),s.gmap.fitBounds(s.gcircle?s.gcircle.getBounds():r.geometry.viewport),s.address=r.cleanData=o,s.$mainCont.addClass("valid-address").removeClass("invalid-address").find(".ap-status-address .text-ap").text(i.text.valid),s.valid=!0,a.call(s,r),e}},getAddress:function(){return this.address},isValid:function(){return this.valid},geocodeLookup:function(t,n,s,i,r){i=i||!1,s=s||"";var o=this,d=o.settings,l=e.extend({},d.geocoderOptions);if(i&&a.call(o),"latLng"==s)"string"==typeof t&&(t=t.split(","),t=new google.maps.LatLng(t[0],t[1])),l.latLng=t;else if(l.address=t+d.appendToAddressString,!r&&"function"==typeof n&&"undefined"!=typeof o.addressMapping[t])return void(i&&o.updater(t));this.geocoder.geocode(l,function(e,t){if(t===google.maps.GeocoderStatus.OK){o.addressMapping={};for(var a=0;a<e.length&&9>a;a++){var s=e[a];o.addressMapping[s.formatted_address]=s}if("function"==typeof n&&n.call(o,e),i){var r=e[0].formatted_address;o.$element.val(r),o.addressMapping[r]=e[0],o.updater(r)}}})},resizeMap:function(a,n){var s=this;t(function(){var t,i=s.settings,r=s.$mapBox?s.$mapBox.parent():e("#"+i.mapId).parent();if(r.length){{var o=r.parent();o.height(),o.width()}t="undefined"!=typeof a&&"undefined"!=typeof n?new google.maps.LatLng(a,n):s.gmap.getCenter(),i.zoom&&s.gmap.setZoom(i.zoom),google.maps.event.trigger(s.gmap,"resize"),s.gmap.setCenter(t)}},300,"resize")},setRadius:function(e){var t=this;t.gcircle&&(t.gcircle.setRadius(1e3*e),t.gmap.fitBounds(t.gcircle.getBounds()))}};var o=function(t){var a=this.data("addressPickerByGiro");if(a)return"string"==typeof t&&a[t]?a[t].apply(a,Array.prototype.slice.call(arguments,1)):console.log("Method "+t+" does not exist on jQuery.addressPickerByGiro");if(!t||"object"==typeof t){for(var n=this.length,s=0;n>s;s++){var r=e(this[s]);a=e.extend({},i),a.init(r,t),r.data("addressPickerByGiro",a)}return this}return console.log('jQuery.addressPickerByGiro is not instantiated. Please call $("selector").addressPickerByGiro({options})')};e.fn?e.fn.addressPickerByGiro=o:e.prototype.addressPickerByGiro=o}(bg);